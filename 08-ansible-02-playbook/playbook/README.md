Файл Inventory не стал сильно изменять. Мне понравилась идея тестирования плейбуков внутри контейнеров, поэтому я решил воспользоваться образом pytontribs из прошлого задания. На работе мы чаще всего работает с Centos7, поэтому данный образ и взял для тестов.  
Даже исходный плейбук, взятый из репозитория неотологии содержал большое число ошибок типа "fatal" при использовании линтера. Ошибки были типа:
```shell
You can skip specific rules or tags by adding them to your configuration file:                                                                                     
┌───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ # .ansible-lint                                                                                                                                               │ 
│ warn_list:  # or 'skip_list' to silence them completely                                                                                                       │ 
│   - '208'  # File permissions unset or incorrect                                                                                                              │ 
│   - experimental  # all rules tagged as experimental                                                                                                          │ 
└───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```
И были связаны с тем, что каждый раз в процессе сохранения или добавления нового файла мы не давали ему конкретные права. У Ансибла на этот счёт есть поведение по-умолчанию, поэтому даже с этими ошибками плейбук отрабатывал нормально, но для более правильного подхода я добавил в каждый такой раздел блок с правами:
```shell
...
        owner: root
        group: wheel
        mode: u=rw,g=r,o=r
...
```
После этого линтер перестал ругаться и выдавать хоть какие-то сообщения об ошибках.  

Результат прогона плейбука с флагом --diff
```shell
ilyamarin@mr-chaffinch-macbook devops-netology % sudo ansible-playbook -i inventory/prod.yml site.yml --diff

PLAY [Install Java] ***************************************************************************************************************************************************

TASK [Gathering Facts] ************************************************************************************************************************************************
ok: [centos7]

TASK [Set facts for Java 11 vars] *************************************************************************************************************************************
ok: [centos7]

TASK [Upload .tar.gz file containing binaries from local storage] *****************************************************************************************************
ok: [centos7]

TASK [Ensure installation dir exists] *********************************************************************************************************************************
ok: [centos7]

TASK [Extract java in the installation directory] *********************************************************************************************************************
skipping: [centos7]

TASK [Export environment variables] ***********************************************************************************************************************************
ok: [centos7]

PLAY [Install Elasticsearch] ******************************************************************************************************************************************

TASK [Gathering Facts] ************************************************************************************************************************************************
ok: [centos7]

TASK [Upload tar.gz Elasticsearch from remote URL] ********************************************************************************************************************
ok: [centos7]

TASK [Create directrory for Elasticsearch] ****************************************************************************************************************************
ok: [centos7]

TASK [Extract Elasticsearch in the installation directory] ************************************************************************************************************
skipping: [centos7]

TASK [Set environment Elastic] ****************************************************************************************************************************************
ok: [centos7]

PLAY [Install Kibana] *************************************************************************************************************************************************

TASK [Gathering Facts] ************************************************************************************************************************************************
ok: [centos7]

TASK [Upload tar.gz Kibana from remote URL] ***************************************************************************************************************************
ok: [centos7]

TASK [Create directrory for Kibana] ***********************************************************************************************************************************
ok: [centos7]

TASK [Extract Kibana in the installation directory] *******************************************************************************************************************
skipping: [centos7]

TASK [Set environment Kibana] *****************************************************************************************************************************************
ok: [centos7]

PLAY RECAP ************************************************************************************************************************************************************
centos7                    : ok=13   changed=0    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   

ilyamarin@mr-chaffinch-macbook devops-netology % 
```
Плейбук делает ровно то, что описано в задании: в дополнении к установке JDK (актуальной версии) и Elasticsearch ставит Kibanа (актуальной версии). Для запуска плейбука необходимо запусить его командой ``ansible-playbook -i inventory/prod.yml site.yml``. Все 3 программы устанавливаются на одну машину (сейчас ограничен в ресурсах системы), но создана заглушка под хост ``kibana``.

Тэги, используемые в плейбуке:  
```
ilyamarin@mr-chaffinch-macbook devops-netology % sudo ansible-playbook -i inventory/prod.yml site.yml --list-tags

playbook: site.yml

  play #1 (all): Install Java   TAGS: []
      TASK TAGS: [java]

  play #2 (all): Install Elasticsearch  TAGS: []
      TASK TAGS: [elastic]

  play #3 (all): Install Kibana TAGS: []
      TASK TAGS: [kibana]
```