# Домашнее задание к занятию "12.3 Развертывание кластера на собственных серверах, лекция 1"
Поработав с персональным кластером, можно заняться проектами. Вам пришла задача подготовить кластер под новый проект.

## Задание 1: Описать требования к кластеру
Сначала проекту необходимо определить требуемые ресурсы. Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

* База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Кэш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий.
* Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

## Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

План расчета
1. Сначала сделайте расчет всех необходимых ресурсов.
2. Затем прикиньте количество рабочих нод, которые справятся с такой нагрузкой.
3. Добавьте к полученным цифрам запас, который учитывает выход из строя как минимум одной ноды.
4. Добавьте служебные ресурсы к нодам. Помните, что для разных типов нод требовния к ресурсам разные.
5. Рассчитайте итоговые цифры.
6. В результате должно быть указано количество нод и их параметры.

Составим таблицу для потребления ресурсов:
| Имя системы | Количество реплик | CPU per one | RAM per one | HDD per one | CPU sum | RAM sum | HDD sum |
|-------------|-------------------|-------------|-------------|-------------|---------|---------|---------|
| База данных | 3                 | 1           | 4           | 10          | 3       | 12      |  30     |
| Кэш         | 3                 | 1           | 4           | 10          | 3       | 12      |  30     |
| Фронт       | 5                 | 0.1         | 0.05        | 10          | 0.5     | 0.25    |  50     |
| Бэк         | 10                | 1           | 0.6         | 10          | 10      | 6       |  100    |
|Итого        |                   |             |             |             | 16.5    | 30.25   |  210    |

Для рассчёта необходимо значение HDD, поэтому было взято рандомное значение для красивых цифр.  

Посчитаем количество узлов:  
| Тип узла  | Количество узлов | CPU per one | RAM per one | HDD per one | CPU sum | RAM sum | HDD sum |
|-----------|------------------|-------------|-------------|-------------|---------|---------|---------|
|Master node| 3                | 2           | 2           | 50          | 6       | 6       | 150     |
|Worker node| 3                | 1           | 1           | 100         | 3       | 3       | 300     |
|Итого      |                  |             |             |             | 9       | 9       | 450     |

Итоговое количество ресурсов, с округлением в большую сторону, под каждый тип узла выглядит следующим образом:  
Для Master-ноды:
| CPU     | RAM     | HDD     |
|---------|---------|---------|
| 2       | 2       | 50      |

Для Worker-ноды:
| CPU     | RAM     | HDD     |
|---------|---------|---------|
| 7       | 11      | 150     |

В таблице выше указаны минимальные значения, взятые из презентации. Количество Master-узлов было взято равным 3. Это минимальное количество, нужное для создания отказоустойчивого кластера K8S. Количество Worker-узлов также было взято равным 3.  
  
Посчитаем итоговые показатели, взяв коэффициент х1.5 для CPU и RAM, а также х1.8 для hdd, т.к. количество данных будет постоянно расти. Итого:  
CPU: 16.5 * 1.5 + 9 = 33.75 ~ 34  CPU
RAM: 30.25 * 1.5 + 9 = 54.37 ~ 55 Gb  
HDD: 210 * 1.8 + 450 = 828 Gb  
Стоить отметить, что количество ресурсов для узлов было взято по минимально рекомендуемой границе и её лучше масштабировать, согласно предложенным коэффициентам.
