# Домашнее задание к занятию "10.06. Инцидент-менеджмент"

## Задание 1

Составьте постмотрем, на основе реального сбоя системы Github в 2018 году.

Информация о сбое доступна [в виде краткой выжимки на русском языке](https://habr.com/ru/post/427301/) , а
также [развёрнуто на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).

## Задача повышенной сложности

Прослушайте [симуляцию аудиозаписи о инциденте](https://youtu.be/vw6I5DYWkNA?t=1), предоставленную 
разработчиками инструмента для автоматизации инцидент-менеджмента PagerDuty.

На основании этой аудиозаписи попробуйте составить сообщения для пользователей о данном инциденте.

Должно быть 3 сообщения о:
- начале инцидента
- продолжающихся работах
- окончании инцидента и возвращении к штатной работе

---

### Как оформить ДЗ?

| Этап                            | Описание    |
| :---                            |         ---:|
| Краткое описание инцидента      | Деградация части сервисов, начавшаяся в 22:52 UTC 21 октября 2018, и длившаяся 24 часа 11 минут. В результате сбоя множество систем                                     отображало устаревшие или поврежденные данные. Пользовательские данные не были утеряны.|
| Предшествующие события          | Плановые работы по замене отказывающего 100G оптического кабеля             |
| Причина инцидента               | Потеря соединения между сетевым хабом и дата центром Восточного побережья США |
| Воздействие                     | В течение всего срока деградации сервиса (24 часа 11 минут) на сайте Github отображадась устаревшая информация. Сбой повлиял на                                        метаданные веб-сайтов, хранившихся в MySQL базах данных GitHub              |
| Обнаружение                     | 21 октября в 22:54 (UTC) системы оповещений системы генерации оповещений начали информировать о многочисленных ошибках |
| Реакция                         | В 22:54 (UTC) на линии было несколько инженеров, обрабатывающих и сортирующих поступающие заявки. К 23:02 инженеры отреагировавшей команды определили, что топологии кластеров различных баз данных были в неопределённом статусе. Запрос к API Orchestrator отобразил топологию репликации базы данных, которая включала только серверы из центра обработки данных на западном побережье США. К 23:09 (UTC) проблеме был присовен желтый статус. К 23:11 статус изменён на красный подкличившимся координатором.|
| Восстановление                  | В 00:05 начата разработка плана по разрешению несоответствия данных. В 00:41 начато восстановление бюкапа MySQL. В 06:51 восстановление данных Восточного побережья завершено и начато копирование новых данных с Западного побережья.             |
| Таймлайн                        | 22:52 21.10.2018 UTC - сбой соединения между ЦОД Восточного и Западного побережья США. <br> 22:54 21.10.2018 UTC - обнаружение сбоя. <br> 23:02 21.10.2018 UTC - определение причины сбоя, связанной с непредвиденным состоянием БД. <br> 23:09 21.10.2018 UTC - присвоение событию желтого статуса. <br> 23:11 21.10.2018 UTC - присвоение событию красного статуса. <br> 23:13 21.10.2018 UTC - привлечение дополнительных специалистов, детальное изучение ситуации. <br> 23:19 21.10.2018 UTC - принятие решения об остановке запущенных задач, пишущих метаданные. <br> 00:05 22.10.2018 UTC - разработка плана восстановления. <br>  00:41 22.10.2018 UTC - начат процесс восстановления кластеров из резервной копии. <br> 06:51 22.10.2018 UTC - окончание процесса восстановления, начало процесса репликации. <br> 07:46 22.10.2018 UTC - опубликовано сообщение с описанием сбоя в блоге. <br> 11:12 22.10.2018 UTC - окончание репликации кластеров. <br> 13:15 22.10.2018 UTC - выделены дополнительные MySQL реплики для уменьшения задержи репликации на чтение. <br> 16:24 22.10.2018 UTC - окончание синхронизации реплик. Статус сервисов сохранен на красном уровне, чтобы закончить процессы, накопившиеся за время сбоя. <br> 16:45 22.10.2018 UTC - подтверждение восстановления данных, статус сайта изменен на зеленый.              |
| Последующие действия            | Анализ двоичных журналов MySQL, содержащих записи, сделанные на основном сайте, которые не были реплицированы в сайт западного побережья US. <br> Улучшены навыки, необходимые для более точной оценки времени на устранение ошибок и решение инцидентов. <br> Ищменены настройки оркестровщика, чтобы предотвратить продвижение первичных баз данных через региональные границы. <br> Ускорен переход на новый механизм отчетности о состоянии дел, который обеспечит более богатую площадку для обсуждения активных инцидентов <br> За несколько недель до инцидента начата общекорпоративная инициатива по поддержке обслуживания трафика GitHub из нескольких ЦОД, поддержка резервирования N+1 <br> Команда изменила фокус на проактивную позицию в решении инцидентов. <br> Внедрена системная практика проверки сценариев сбоев до того, как они могут произойти. <br> Необходимо больше инвестировать в инъекции ошибок и инструменты хаос-инженерии. |